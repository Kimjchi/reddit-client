(this["webpackJsonpreddit-client"]=this["webpackJsonpreddit-client"]||[]).push([[0],{26:function(e,t,n){},27:function(e,t,n){},35:function(e,t,n){},36:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),s=n(16),a=n.n(s),i=(n(26),n(27),n(13)),o=n(2),d=n.p+"static/media/reddit.cfa96dc8.svg",u=n(1);function l(){return Object(u.jsx)("header",{children:Object(u.jsx)(i.b,{to:"/",children:Object(u.jsxs)("span",{className:"header-content",children:[Object(u.jsx)("img",{src:d,className:"App-logo",alt:"logo"}),Object(u.jsxs)("h1",{children:["Reddit client ",Object(u.jsx)("span",{className:"little-quote",children:"by J\xe9r\xe9my"})]})]})})})}var j,b,h=n(8),f=n(10),m=n(9),p=n.n(m),O=n(14),x=n(5),v=Object(x.b)("posts/fetchPosts",Object(O.a)(p.a.mark((function e(){var t,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://www.reddit.com/r/popular.json");case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n.data.children);case 7:case"end":return e.stop()}}),e)})))),w=Object(x.c)({name:"posts",initialState:{posts:[],currentPost:{},loading:!1,hasError:!1},reducers:{setCurrentPost:function(e,t){e.currentPost=t.payload}},extraReducers:(j={},Object(f.a)(j,v.pending,(function(e,t){e.loading=!0,e.hasError=!1})),Object(f.a)(j,v.fulfilled,(function(e,t){e.loading=!1,e.hasError=!1,e.posts=t.payload.map((function(e){return e.data}))})),Object(f.a)(j,v.rejected,(function(e,t){e.loading=!1,e.hasError=!0})),j)}),g=function(e){return e.posts.posts},y=function(e){return e.posts.currentPost},_=w.actions.setCurrentPost,k=w.reducer;n(35);function E(){var e=Object(h.c)(g),t=Object(h.b)();Object(r.useEffect)((function(){t(v())}),[t]);return Object(u.jsx)("div",{className:"cards-container",children:e.map((function(e){return Object(u.jsx)(i.b,{to:"/post/".concat(e.subreddit,"/").concat(e.id),onClick:function(){return function(e){t(_(e))}(e)},children:Object(u.jsxs)("div",{className:"card",children:[Object(u.jsx)("div",{className:"container",children:Object(u.jsx)("h4",{children:Object(u.jsx)("b",{children:e.title})})}),e.is_video&&"nsfw"!==e.thumbnail&&Object(u.jsxs)("video",{controls:!0,autoPlay:!0,loop:!0,muted:!0,children:[Object(u.jsx)("source",{src:e.media.reddit_video.fallback_url,type:"video/mp4"}),"Your browser does not support the video tag."]}),"link"!==e.post_hint&&!0!==e.is_video&&"self"!==e.thumbnail&&"default"!==e.thumbnail&&"nsfw"!==e.thumbnail&&Object(u.jsx)("img",{src:e.url_overridden_by_dest,alt:"Avatar",style:{width:"100%"}})]})},e.id)}))})}var N=Object(x.b)("comments/fetchComments",function(){var e=Object(O.a)(p.a.mark((function e(t){var n,r,c,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.postId,r=t.subreddit,e.next=3,fetch("https://www.reddit.com/r/".concat(r,"/").concat(n,".json"));case 3:return c=e.sent,e.next=6,c.json();case 6:return s=e.sent,e.abrupt("return",s[1].data.children);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),P=Object(x.c)({name:"comments",initialState:{comments:[],loading:!1,hasError:!1},reducers:{},extraReducers:(b={},Object(f.a)(b,N.pending,(function(e,t){e.loading=!0,e.hasError=!1})),Object(f.a)(b,N.fulfilled,(function(e,t){e.loading=!1,e.hasError=!1,e.comments=t.payload.map((function(e){return e.data}))})),Object(f.a)(b,N.rejected,(function(e,t){e.loading=!1,e.hasError=!0})),b)}),I=function(e){return e.comments.comments},C=P.reducer;function A(e){var t=e.postId,n=e.subreddit,c=Object(h.c)(I),s=Object(h.b)();return Object(r.useEffect)((function(){s(N({postId:t,subreddit:n}))}),[s,t,n]),Object(u.jsx)(u.Fragment,{children:c.map((function(e){return Object(u.jsx)("div",{className:"container",children:Object(u.jsx)("h4",{children:Object(u.jsx)("b",{children:e.body})})},e.id)}))})}function F(){var e=Object(o.f)(),t=e.postId,n=e.subreddit,r=Object(h.c)(y);return Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)("div",{className:"cards-container",children:[Object(u.jsxs)("div",{className:"card post-details",children:[Object(u.jsx)("div",{className:"container",children:Object(u.jsx)("h4",{children:Object(u.jsx)("b",{children:r.title})})}),r.is_video&&"nsfw"!==r.thumbnail&&Object(u.jsxs)("video",{controls:!0,autoPlay:!0,loop:!0,muted:!0,children:[Object(u.jsx)("source",{src:r.media.reddit_video.fallback_url,type:"video/mp4"}),"Your browser does not support the video tag."]}),"link"!==r.post_hint&&!0!==r.is_video&&"self"!==r.thumbnail&&"default"!==r.thumbnail&&"nsfw"!==r.thumbnail&&Object(u.jsx)("img",{src:r.url_overridden_by_dest,alt:"Avatar",style:{width:"100%"}})]}),Object(u.jsx)(A,{postId:t,subreddit:n})]})})}function B(){return Object(u.jsx)("footer",{children:Object(u.jsxs)("div",{children:["Icons made by ",Object(u.jsx)("a",{href:"https://www.freepik.com",title:"Freepik",children:"Freepik"})," from ",Object(u.jsx)("a",{href:"https://www.flaticon.com/",title:"Flaticon",children:"www.flaticon.com"})]})})}var R=function(){return Object(u.jsxs)("div",{className:"App",children:[Object(u.jsxs)(i.a,{children:[Object(u.jsx)(l,{}),Object(u.jsxs)(o.c,{children:[Object(u.jsx)(o.a,{path:"/post/:subreddit/:postId",children:Object(u.jsx)(F,{})}),Object(u.jsx)(o.a,{path:"/",children:Object(u.jsx)(E,{})})]})]}),Object(u.jsx)(B,{})]})};function S(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return new Promise((function(t){return setTimeout((function(){return t({data:e})}),500)}))}var J=Object(x.b)("counter/fetchCount",function(){var e=Object(O.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S(t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),W=Object(x.c)({name:"counter",initialState:{value:0,status:"idle"},reducers:{increment:function(e){e.value+=1},decrement:function(e){e.value-=1},incrementByAmount:function(e,t){e.value+=t.payload}},extraReducers:function(e){e.addCase(J.pending,(function(e){e.status="loading"})).addCase(J.fulfilled,(function(e,t){e.status="idle",e.value+=t.payload}))}}),Y=W.actions,q=(Y.increment,Y.decrement,Y.incrementByAmount,W.reducer),M=Object(x.a)({reducer:{counter:q,comments:C,posts:k}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a.a.render(Object(u.jsx)(c.a.StrictMode,{children:Object(u.jsx)(h.a,{store:M,children:Object(u.jsx)(R,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[36,1,2]]]);
//# sourceMappingURL=main.badd644c.chunk.js.map